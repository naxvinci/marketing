# google analytics_collecting data and setting conversion

## [애널리틱스 계정 구성]

- Organization > Account(계정) > Property
- 각 속성(property)마다 raw data, test, master  최소 3개의 views를 설정하는 것을 권장
- 대행사의 경우 organization이 여러개일 수 있음



### 속성

> 웹사이트와 모바일 앱의 데이터를 각기 다른 속성에서 관리하고 분석하려면 property를 분리해서 추적하는 것이 좋음
>
> 계정과 마찬가지로 속성의 고유 속성 ID도 애널리틱스 ID에 추가됨. 어떤 조회가 이 속성과 연결되었는지를 파악 가능

#### 교차 도메인 추적 ( cross-domain tracking )

- == site linking 
- 동일한 세션에서 발생하는 관련 웹사이트 간 이동을 인식하는 기능
- 이걸로 새 창이 떠도 트래킹 유지할 수 있는 방법 있지 않을까?
- 애널리틱스 360(유료) 에서는 다른 방식이 있다고 함



#### 속성 수와 보기 수의 한도

- 각 애널리틱스 계정에는 속성 수가 제한되어 있음
- 마찬가지로 각 속성 내 보기 수도 제한되어 있음



### 사용자 권한

- 계정, 속성 또는 보기 수준에서 사용자 권한을 부여하는 것도 가능
- 보기권한(view permissions) : 애널리틱스 계정에서 특정 데이터에 액세스 할 수 있는 권한





## [보기에서 고급필터 설정]

> 보고서 쉽게 이해할 수 있도록 데이터의 범위 좁히기

### 필터 유형 2가지

### 1. 사전 정의된 필터 (predefined)

- 애널리틱스에서 기본제공
- 특정 ISP 도메인, IP 주소, 하위 디렉토리 또는 호스트 이름에서 유입된 트래픽 데이터를 포함 또는 제외할 수 있으며, 필터의 충족 조건을 지정

### 2. 맞춤 필터 (custom)

- 데이터 수집에서 조회를 포함 또는 제외
- 데이터를 소문자 또는 대문자로 포맷하기 등
- 조회에서 수집된 데이터를 검색 및 교체도 가능
- 지정된 필터 텍스트 패턴의 일치 여부를 판단

#### 1) 포함 필터 (include)

- 특정 카테고리 혹은 특정 캠페인 데이터만 조회하려는 경우 등 유효

#### 2) 제외 필터(exclude)

- 구체적으로 유료검색(혹은 CPC 등) 등의 트래픽을 데이터에서 제외하려는 경우 등

#### 3) 소문자 및 대문자 필터 (lower/uppercase)

- 구글애널리틱스 데이터에서는 대소문자를 구분하지 X
- 따라서 해당 필터 사용하면 대소문자만 다른 행만 결합 가능
- 또는 소문자 또는 대문자로 강제 통일하여 데이터 중복 제거 가능 --> 데이터 더 깔끔표시

#### 4) 고급 필터(advanced)

- 정규표현식(regular expressions) 사용하기 : 액션을 실행하기 위해 일치하는 텍스트를 식별하는 문자
- 필터 필드 삭제, 교체, 결합 가능 
  - ex) 여러 도메인에서 데이터를 수집하는 비즈니스의 경우 Google 애널리틱스에서 페이지 이름을 구분하기가 힘들 수 있습니다. '모든 페이지' 보고서에서는 'googlestoreamerica/index.axd'와 'googlestoreeurope/index.axd'가 모두 'index.axd'로 표시



### 필터 적용 타이밍

- 관리 > 필터> 필터 순서 지정 에서 필터의 순서 조정 가능. 
- 필터도 데이터에 소급 적용 X. 내가 만든 순간부터 쌓이는 데이터에만 적용. 적용까지 최대 24시간 소요
- 필터 변경 시, 이 필터가 적용된 모든 보기(view)에 적용되어버리니 주의
- 전체 데이터 필터링 시 시간이 소요되므로 실시간 보고서에서 먼저 시험해볼 것



## [맞춤 측정기준(custom dimension) 만들기]

> 기본 측정기준과 유사하나, 내용과 값을 사용자가 직접 정의한다는 점이 다름.

- 페이지에 구현된 자바스크립트 추적 코드를 이용해 데이터 수집
- 사용자가 페이지 방문/특정 행동 시 [맞춤 측정기준]에서 해당 데이터 포착
- 데이터 포착 -> 기존의 조회에 추가되는 매개변수 (additional parameter)로 전송 -> 보고서에서 확인

### 1. 설정

- 관리(admin) > (맞춤 측정기준 적용할 속성 선택 후) 맞춤 정의 > 맞춤 측정기준 > 새 맞춤 측정기준
  - 기준의 이름 지정, 범위 정의
  - **범위(Scope) :  '조회(hit)', '제품(product)', '세션(session)', '사용자(user)'**... 얼마나 넓게 수집할 것인지
- 조회 : 특정 페이지 방문/ 행동 시 마다 그 내용이 측정기준에 반영되길 원하는 경우
- 제품 : 측정기준에서 특정 제품과 연결된 데이터를 분류하려는 경우
- 세션 : 측정기준에서 세션 시간 분류
- 사용자 : 측정기준에서 특정 사용자의 데이터를 분류

- 표준 측정기준 및 측정항목처럼 맞춤 측정기준과 측정항목도 **범위가 유사한 측정기준 또는 측정항목과만 조합해서 사용 가능**함
- 처음 생성하고 나면 사이트에 삽입할 자바스크립트 제공됨. 이 코드 복사하고 완료

#### 생성 이후

- 만들어진 순서 따라 색인번호가 부여됨 (Index). 사용자가 바꿀 수는 없음
- 데이터 수집방식, 수집 데이터 종류 따라 추적 코드 구현 방법 다름
- 이 때 구글 태그매니저가 도움됨ㅋ

### 2. 보고서의 맞춤 측정기준 이용

- 표준 보고서에서는 보조 측정기준으로 쓰임
- but 맞춤 보고서에서는 기본 측정기준으로 사용 가능
- 이전에 수집했던 데이터에 소급적용은 안된다!!! 
- 먼저 맞춤 측정기준을 생성해내라!



## [맞춤 측정항목(custom metrics) 만들기]

> 커스텀 디멘션처럼 자바스크립트 통해서 데이터 수집함
>
> 페이지에 로드된 광고의 개수, 페이지가 로드될 때 사용된 대역폭, 각 마케팅 채널에서 발생한 브랜드 페이지뷰의 총 횟수 등

- 설정하는 과정이 측정기준과 거의 비슷

### 1. 범위(Scope)

- 범위에 '조회'와 '제품'만 있음
- 조회 : 추적코드에 의해 **조회가 전송될 때마다** 맞춤 측정항목이 집계되고 애널리틱스에서 총계가 산출됨
- 제품 : **제품에 할당된 비용**에 따라 측정항목 집계됨

### 2. 맞춤 측정항목 형식 지정하기 ( Formatting Type )

- 정수(Integer), 통화Currency(십진수 Decimal), 시간(Time) 중에서 하나를 선택 가능
- ex) 페이지 뷰 총계 (횟수) 파악하려하면 조회별로 1을 카운트 == 즉 정수 선택

### 3. 최소값과 최대값 (Minimal/ Maximun Value)

- 맞춤측정항목을 처리하고 보고서에 포함할지 여부를 결정
- 실수로 너무 큰/작은 값 수집되어 보고서 왜곡되는 현상 방지 가능

### 4. 유의할 점

- 조회별로 특정 값의 맞춤 측정항목을 전송하는 방식도 가능
- 조회별로 각기 다른 값을 직접 지정하는 것도 가능
- ??????



## [이벤트 추적을 활용한 사용자 행동 이해]

추적하려는 요소나 상태별로 별도의 이벤트 추적을 설정해야 함. 

**ex) 동영상의 재생 및 일시중지 시점 모두 추적 원하는 경우**

- 버튼의 재생 상태와 일시중지 상태에 대해 별도의 이벤트 추적을 설정해야 함

### 이벤트 추적코드에서 이벤트 조회와 함께 전달되는 변수

#### 1. 카테고리

- 추적하는 이벤트를 그룹으로 분류 가능 (ex. 동영상, 소셜공유 등)

#### 2. 액션

- 사용자가 이벤트를 시작할 때 한 행동
- 선택사항

#### 3. 라벨

- 추적 요소를 설명하는 값 (ex. 체험신청 버튼)
- 선택사항

#### 4. 값

- 숫자값 (ex. 동영상 로드 시간, 이벤트 액션의 가치 등)
- 특정 행동이 발생할 때의 금액을 구체적으로 지정하는 것도 가능
- 선택사항



### 이벤트 수

#### 1. 총 이벤트 수

- 추적 대상 요소와의 총 상호작용 횟수
- 한 버튼 여러번 클릭하면 클릭하는대로 카운팅

#### 2. 순 이벤트 수 ( unique )

- 사용자가 이벤트를 실행한 횟수
- 단일 세션 내에 이뤄진 빈복 행동이면 1회로 카운팅



### 이벤트 보고서

- 행동 섹션 > 이벤트 보고서 > 인기 이벤트 (Top Events)
  - 카테고리 기준으로 구성된 이벤트 열람 가능
  - 이벤트 카테고리별 총 이벤트 수, 순 이벤트 수, 평균값(해당되는 경우), 측정항목 표시
- 카테고리 클릭 시 연결된 액션 표시
- 액션 클릭 시 연결된 라벨 표시
- **이벤트를 통해 외부 링크 클릭으로 사이트 떠나는 것도 추적 가능**
  - 채널톡 추적 가능? 
  - '외부 링크' 카테고리, '채널톡' 액션, '(해당 라벨명 or {{clicked_page}} )' 라벨을 이용해 이 버튼에 대한 이벤트 추적을 설정할 수 있음. 
  - 채널톡 버튼을 어디에서 몇 번 클릭했는지 알 수 있겠지



## [계산된 측정항목]

- calculated metrics
- pageviews per user 와 같은 계산된 수치 측정하고 싶을 때 만든다
- ex) {{Android Pageviews}} / {{Users}}



## [향상된 전자상거래]

- enhanced ecommerce
- 관리(admin)> view > Ecommerce Set-up > Enable Ecommerce(on) > Enhanced Ecommerce Settings(on)
- Data를 보려면 자바스크립트 코드 추가해야 함

 